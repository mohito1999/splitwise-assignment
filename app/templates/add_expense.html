{% extends "base.html" %}
{% block content %}
<h2>Add Expense</h2>
<form method="post" action="/add-expense">
    <div class="mb-3">
        <label class="form-label">Group:</label>
        <select name="group_id" class="form-select" required>
            {% for group in groups %}
                <option value="{{ group.id }}">{{ group.name }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="mb-3">
        <label class="form-label">Paid By:</label>
        <select name="added_by" class="form-select" required>
            {% for user in users %}
                <option value="{{ user.id }}">{{ user.name }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="mb-3">
        <label class="form-label">Amount:</label>
        <input type="number" step="0.01" name="amount" class="form-control" required>
    </div>

    <div class="mb-3">
        <label class="form-label">Split Type:</label>
        <select name="split_type" class="form-select" onchange="toggleSplitType(this.value)" required>
            <option value="equal">Equal</option>
            <option value="percent">Percentage</option>
        </select>
    </div>

    <div id="percent-splits" style="display: none;">
        <h5>Percentage Splits</h5>
        {% for user in users %}
        <div class="mb-3">
            <label class="form-label">{{ user.name }}:</label>
            <input type="number" step="0.1" name="percentages[]" class="form-control" 
                   data-user-id="{{ user.id }}" placeholder="Percentage">
        </div>
        {% endfor %}
    </div>

    <button type="submit" class="btn btn-primary">Add Expense</button>
</form>

<script>
function toggleSplitType(value) {
    const percentSplits = document.getElementById('percent-splits');
    percentSplits.style.display = value === 'percent' ? 'block' : 'none';
}
</script>
{% endblock %}
